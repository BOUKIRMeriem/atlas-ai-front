<div class="main-container">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <div class="sidebar-header">
      <button class="new-chat">
        <i class="fas fa-comment-medical" style="font-size: 20px;"></i> Nouveau chat
      </button>
      <button class="search">
        <i class="fas fa-search" style="left: 100px;"></i>
      </button>
    </div>
    <p class="section-title">Historique <span class="view-all">All ></span></p>
    <ul class="history-list">
      <li>Analyse des ventes</li>
      <li>Analyse des Retours Clients</li>
      <li>Prédiction des Tendances</li>
      <li>Prévisions de ventes</li>
    </ul>
    <p class="section-title">Assistants <span class="view-all">All ></span></p>
    <ul class="assistants-list">
      <li>
        <img src="assets/images/img1.png" alt="VisioData" class="assistant-img" />
        <p style="font-size: 16px; font-weight: 500;">VisioData</p>
      </li>
      <li>
        <img src="assets/images/img2.png" alt="TourBot" class="assistant-img" />
        <p style="font-size: 16px; font-weight: 500;">TourBot</p>
      </li>
    </ul>
  </div>

  <!-- Navbar -->
  <div class="avatar-container" [class.has-scroll]="hasScroll">
    <div class="avatar" (click)="toggleMenu()">M</div>
    <div class="menu" *ngIf="menuOpen">
      <p>UserName</p>
      <button>
        <i class="fas fa-sign-out-alt" style="color: #3CB371;"></i> Se Déconnecter
      </button>
    </div>
  </div>

  <!-- CONTENU PRINCIPAL -->
  <div class="chat-container">
    <p class="chat-title" *ngIf="messages.length === 0">Comment puis-je vous aider ?</p>
    <div class="messages-container" #messagesContainer>
      <div class="messages">
        <div *ngFor="let msg of messages" [ngClass]="{'user-msg': msg.isUser, 'bot-msg': !msg.isUser}">
          {{ msg.text }}
        </div>
      </div>
    </div>
    <!-- Zone de saisie -->
    <div class="input-area" [ngClass]="{'fixed-bottom': isFirstMessageSent}">
      <textarea placeholder="Poser une question" appAutoResize [(ngModel)]="message" (input)="toggleIcons($event)"
        (keydown.enter)="sendMessage($event)"></textarea>
      <div class="icons">
        <img src="assets/images/icon_fichier.png" class="icon-file">
        <img *ngIf="!isTextNotEmpty" src="assets/images/icon_voice.png" class="icon-voice">
        <img *ngIf="isTextNotEmpty" src="assets/images/icon_send.png" class="icon-send" (click)="sendMessage($event)">
      </div>
    </div>
  </div>
</div>